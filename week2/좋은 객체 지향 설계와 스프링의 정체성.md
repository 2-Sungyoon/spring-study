# π“… [week 2] μ£Όμ : μΆ‹μ€ κ°μ²΄ μ§€ν–¥ μ„¤κ³„μ™€ μ¤ν”„λ§μ μ •μ²΄μ„±

## π― ν•™μµ λ©ν‘
- **λ‹¤ν•μ„±(Polymorphism)μ ν•κ³„:** λ‹¤ν•μ„±λ§μΌλ΅λ” ν•΄κ²°ν•  μ μ—†λ” μ„¤κ³„μ κ²°ν•¨μ„ μΈμ§€ν•λ‹¤.
- **SOLID μ›μΉ™μ μ‹¤λ¬΄μ  ν•΄μ„:** μ΄λ΅ μ΄ μ•„λ‹ μ½”λ“μ—μ„ μ›μΉ™μ΄ κΉ¨μ§€λ” μ§€μ κ³Ό κ·Έ νκΈ‰ν¨κ³Όλ¥Ό λ¶„μ„ν•λ‹¤.
- **μ¤ν”„λ§μ μ‹±κΈ€ν†¤ λ³΄μ¥ λ©”μ»¤λ‹μ¦:** @Configurationκ³Ό CGLIB ν”„λ΅μ‹μ λ™μ‘ μ›λ¦¬λ¥Ό νμ•…ν•λ‹¤.
- **κ¶μ¥λλ” μμ΅΄κ΄€κ³„ μ£Όμ…:** μƒμ„±μ μ£Όμ…μ„ μ‚¬μ©ν•΄μ•Ό ν•λ” λ…Όλ¦¬μ  μ΄μ λ¥Ό μ •λ¦¬ν•λ‹¤.

---

## π”— 1μ£Όμ°¨ λ¦¬λ§μΈλ“
1μ£Όμ°¨μ—μ„ λ‹¤λ¤λ **μ‹±κΈ€ν†¤μ λ™μ‹μ„± μ„ν—μ„±**κ³Ό **PSAμ νΈλ¦¬ν•¨**μ„ λ°”νƒ•μΌλ΅ "μ™ μ°λ¦¬κ°€ κ·Έ μ„ν—μ„ κ°μν•λ©° μ‹±κΈ€ν†¤μ„ μ“°λ”κ°€?"μ™€ "PSAκ°€ μ–΄λ–»κ² SOLID μ›μΉ™μ„ μ™„μ„±ν•λ”κ°€?"μ— λ€ν• μ„¤κ³„μ  ν•΄λ‹µμ„ μ°Ύλ”λ‹¤

---

## π“ μ£Όμ” κ°λ… μ •λ¦¬

### 1. λ‹¤ν•μ„±(Polymorphism)λ§μΌλ΅ λ¶€μ΅±ν• μ΄μ 
μλ°”μ λ‹¤ν•μ„±μ„ ν™μ©ν•΄ μΈν„°νμ΄μ¤λ¥Ό λ„μ…ν•΄λ„, κ²°κµ­ ν΄λΌμ΄μ–ΈνΈ μ½”λ“μ—μ„ `Interface i = new Implement();`λΌκ³  μ λ” μκ°„ μ„¤κ³„λ” μ‹¤ν¨ν• κ²ƒμ΄λ‹¤.
- **λ¬Έμ μ :** μΈν„°νμ΄μ¤λΏλ§ μ•„λ‹λΌ κµ¬ν„ ν΄λμ¤μ—λ„ λ™μ‹μ— μμ΅΄ν•κ² λλ‹¤. μ΄λ” κµ¬ν„μ²΄λ¥Ό λ°”κΏ€ λ• ν΄λΌμ΄μ–ΈνΈ μ½”λ“λ¥Ό κ°™μ΄ μμ •ν•΄μ•Ό ν•λ―€λ΅ OCP(κ°λ°©-νμ‡„ μ›μΉ™)μ™€ DIP(μμ΅΄κ΄€κ³„ μ—­μ „ μ›μΉ™)λ¥Ό λ™μ‹μ— μ„λ°ν•λ‹¤.
- **μ¤ν”„λ§μ μ—­ν• :** μ• ν”λ¦¬μΌ€μ΄μ…μ„ **'μ„¤μ •(Configuration)'** μμ—­κ³Ό **'μ‹¤ν–‰(Execution)'** μμ—­μΌλ΅ μ™„μ „ν λ¶„λ¦¬ν•λ‹¤. κ°μ²΄λ¥Ό μƒμ„±ν•κ³  μ—°κ²°ν•λ” μ±…μ„μ€ μ¤ν”„λ§(AppConfig)μ—κ² λ„κΈ°κ³ , μ‹¤ν–‰ μμ—­(Service, Controller)μ€ μ¤μ§ μΈν„°νμ΄μ¤λ§ λ°”λΌλ³΄κ² λ§λ“ λ‹¤.



### 2. SOLID μ›μΉ™: μ‹¤λ¬΄μ—μ„ ν”ν ν•λ” μ°©κ°λ“¤
- **DIP(μμ΅΄κ΄€κ³„ μ—­μ „ μ›μΉ™):** λ³€μ νƒ€μ…μ„ μΈν„°νμ΄μ¤λ΅ μ„ μ–Έν–λ‹¤κ³  DIPλ¥Ό μ§€ν‚¨ κ²ƒμ΄ μ•„λ‹λ‹¤. μ½”λ“μ— κµ¬ν„μ²΄ ν΄λμ¤ μ΄λ¦„μ΄ μ§μ ‘ λ…μ‹λμ–΄ μλ‹¤λ©΄ κµ¬μ²΄ν™”μ— μμ΅΄ν•λ” μƒνƒλ‹¤. "λ‚λ” μΈν„°νμ΄μ¤λ§ μ• ν…λ‹, κµ¬ν„μ²΄λ” μ™Έλ¶€μ—μ„ μ•μ•„μ„ λ„£μ–΄λ‹¬λΌ"λ” κµ¬μ΅°λ¥Ό λ§λ“λ” κ²ƒμ΄ ν•µμ‹¬μ΄λ‹¤.
- **LSP(λ¦¬μ¤μ½”ν”„ μΉν™ μ›μΉ™):** λ‹¨μν μ»΄νμΌμ— μ„±κ³µν•λ‹¤κ³  λμ΄ μ•„λ‹λ‹¤. μλ™μ°¨ μΈν„°νμ΄μ¤μ 'μ•΅μ…€'μ€ μ•μΌλ΅ κ°€λ” κΈ°λ¥μ΄λ‹¤. μ΄λ¥Ό λ’¤λ΅ κ°€κ² κµ¬ν„ν•λ©΄ μ»΄νμΌμ€ λμ§€λ§ LSP μ„λ°μ΄λ‹¤. μΈν„°νμ΄μ¤μ **κΈ°λ¥μ  κ·μ•½κ³Ό μ‹ λΆ°**λ¥Ό μ§€ν‚¤λ” κ²ƒμ΄ λ³Έμ§μ΄λ‹¤.

### 3. @Configurationκ³Ό CGLIB: μ‹±κΈ€ν†¤μ„ μ§€ν‚¤λ” 'κ°€μ§ κ°μ²΄'
μ¤ν”„λ§μ€ λΉμ„ μ‹±κΈ€ν†¤μΌλ΅ κ΄€λ¦¬ν•κΈ° μ„ν•΄ μ°λ¦¬κ°€ λ§λ“  AppConfig ν΄λμ¤λ¥Ό κ·Έλ€λ΅ μ“°μ§€ μ•κ³  **CGLIB**λΌλ” λΌμ΄λΈλ¬λ¦¬λ΅ ν•μ΄μ¬ν‚Ήν•λ‹¤.
- **λ™μ‘ μ›λ¦¬:** μ¤ν”„λ§μ€ AppConfigλ¥Ό μƒμ†λ°›μ€ κ°€μ§ ν”„λ΅μ‹ κ°μ²΄λ¥Ό λ§λ“¤μ–΄ μ»¨ν…μ΄λ„μ— λ“±λ΅ν•λ‹¤. ν”„λ΅μ‹λ” "μ΄λ―Έ μ»¨ν…μ΄λ„μ— λΉμ΄ λ“±λ΅λμ–΄ μμΌλ©΄ κ·Έκ±Έ λ°ν™ν•κ³ , μ—†μΌλ©΄ μƒμ„±ν•λ‹¤"λ” λ΅μ§μ„ κ°•μ λ΅ μ‚½μ…ν•λ‹¤.
- **μ£Όμ μ‚¬ν•­:** λ§μ•½ `@Configuration` μ—†μ΄ `@Bean`λ§ μ‚¬μ©ν•λ©΄ μ‹±κΈ€ν†¤μ΄ κΉ¨μ§„λ‹¤. μΌλ° μλ°” λ©”μ„λ“ νΈμ¶λ΅ μ‘λ™ν•μ—¬ λ§¤λ² μƒλ΅μ΄ κ°μ²΄κ°€ μƒμ„±λκΈ° λ•λ¬Έμ΄λ‹¤.



### 4. μ™ μƒμ„±μ μ£Όμ…(Constructor Injection)μΈκ°€?
μ‹¤λ¬΄μ—μ„λ” ν•„λ“ μ£Όμ…(`@Autowired private ...`)μ„ μ•ν‹° ν¨ν„΄μΌλ΅ κ·μ •ν•λ‹¤. λ°λ“μ‹ μƒμ„±μ μ£Όμ…μ„ μ¨μ•Ό ν•λ” μ΄μ λ” μ•„λμ™€ κ°™λ‹¤.
- **λ¶λ³€μ„± λ³΄μ¥:** κ°μ²΄ μƒμ„± μ‹μ μ— μμ΅΄μ„±μ΄ κ²°μ •λλ―€λ΅ `final` ν‚¤μ›λ“λ¥Ό μ“Έ μ μλ‹¤. μ‹¤ν–‰ λ„μ¤‘ μμ΅΄μ„±μ΄ λ³€ν•κ±°λ‚ λ„λ½λ  μ„ν—μ„ μ°¨λ‹¨ν•λ‹¤.
- **μν™ μ°Έμ΅° μ΅°κΈ° λ°κ²¬:** μ• ν”λ¦¬μΌ€μ΄μ… κµ¬λ™ μ‹μ μ— μν™ μ°Έμ΅°λ¥Ό κ°μ§€ν•μ—¬ μ„λ²„ μ‹¤ν–‰ μμ²΄λ¥Ό λ§‰μ•„μ¤€λ‹¤. ν•„λ“ μ£Όμ…μ€ μ‹¤μ  λ©”μ„λ“ νΈμ¶ μ‹μ μ— μ—λ¬κ°€ ν„°μ Έ μ¥μ•  λ€μ‘μ΄ λ¦μ–΄μ§„λ‹¤.
- **μμ μλ°” ν…μ¤νΈ:** ν”„λ μ„μ›ν¬ λ„μ›€ μ—†μ΄ JUnit ν…μ¤νΈλ¥Ό μ§¤ λ•, μ™Έλ¶€μ—μ„ μμ΅΄μ„±μ„ μ§μ ‘ μ£Όμ…(new)ν•  μ μμ–΄ ν…μ¤νΈ μ‘μ„±μ΄ ν›¨μ”¬ μμ›”ν•λ‹¤.

---

## π’» μ½”λ“ μ‹¤μµ λ° μ„¤κ³„ ν¬μΈνΈ

### 1. ν•„λ“ νƒ€μ… μ„ νƒ: long vs Long
| νƒ€μ… | μ΄κΈ°κ°’ | νΉμ§• | μ‚¬μ©μ² |
| :--- | :---: | :--- | :--- |
| **long** | 0 | μ›μ‹ νƒ€μ…, μ„±λ¥ μ λ¦¬, null λ¶κ°€ | κ°’μ΄ ν™•μ‹¤ν λ³΄μ¥λλ” ν•„μ λ°μ΄ν„° |
| **Long** | null | λνΌ ν΄λμ¤, κ°μ²΄ νƒ€μ…, null κ°€λ¥ | DB PK λ“± λ°μ΄ν„° λ¶€μ¬λ¥Ό ν‘ν„ν•΄μ•Ό ν•  λ• |

### 2. PSA μ‚¬λ΅€: ArgumentResolver (μΈμ¦ μ¶”μƒν™”) λ¦¬ν©ν† λ§
μ»¨νΈλ΅¤λ¬κ°€ μΏ ν‚¤λ‚ μ„Έμ… κ°™μ€ **κµ¬μ²΄μ μΈ κΈ°μ **μ— μ¤μ—Όλμ§€ μ•κ² λ§‰λ” κ²ƒμ΄ PSAμ κ°€μΉλ‹¤.

```java
// LoginUserArgumentResolver ν•µμ‹¬ λ΅μ§
@Override
public Object resolveArgument(...) {
    // HttpServletRequest, Cookie λ“± λ³µμ΅ν• λ΅μ° λ λ²¨ κΈ°μ  μ²λ¦¬λ” μ—¬κΈ°μ„ λ‹΄λ‹Ήν•λ‹¤.
    // μ»¨νΈλ΅¤λ¬λ” μ΄λ° μ„Έλ¶€ κµ¬ν„μ„ λ°λΌλ„ μ μ € μ •λ³΄λ¥Ό λ°›μ„ μ μκ² λ³΄νΈλ°›λ”λ‹¤.
    HttpServletRequest request = (HttpServletRequest) webRequest.getNativeRequest();
    String uid = extractUidFromCookies(request);
    
    // λΉ„μ¦λ‹μ¤ λ΅μ§μ— ν•„μ”ν• νƒ€μ…μΌλ΅ μ •μ ν•μ—¬ λ°ν™ν•λ‹¤.
    // νƒ€μ…μ— λ”°λΌ IDλ§ μ£Όκ±°λ‚ DBμ—μ„ κ°μ²΄λ¥Ό μ§μ ‘ μ΅°νν•΄ μ£ΌκΈ°λ„ ν•λ‹¤.
    if (Long.class.isAssignableFrom(parameter.getParameterType())) {
        return userId;
    }
    return userRepository.findById(userId).orElseThrow(...);
}
```

## π’΅ νκ³  λ° μ§μμ‘λ‹µ
Q: λ‹¤ν•μ„±λ§μΌλ΅ OCP, DIPλ¥Ό λ» μ§€ν‚¤λ” μ΄μ κ°€ λ¬΄μ—‡μΈκ°€μ”?
A: μΈν„°νμ΄μ¤λ¥Ό μ„ μ–Έν•΄λ„ κ²°κµ­ μ°λ³€μ— new JdbcRepository();μ™€ κ°™μ€ κµ¬ν„μ²΄ μ΄λ¦„μ΄ λ“¤μ–΄κ°€λ” μκ°„, ν΄λΌμ΄μ–ΈνΈκ°€ κµ¬ν„μ²΄λ¥Ό μ§μ ‘ μ„ νƒν•κ² λλ‹¤. κµ¬ν„μ²΄ λ³€κ²½ μ‹ ν΄λΌμ΄μ–ΈνΈ μ½”λ“λ¥Ό κ³ μ³μ•Ό ν•λ―€λ΅ OCPκ°€ κΉ¨μ§€κ³ , μ¶”μƒν™”κ°€ μ•„λ‹ κµ¬μ²΄ν™”μ— μμ΅΄ν•κ² λμ–΄ DIPλ¥Ό μ„λ°ν•κ² λλ‹¤.

Q: μ‹±κΈ€ν†¤ λΉμ€ μ™ λ¬΄μƒνƒ(Stateless)μ—¬μ•Ό ν•λ‚μ”?
A: 1μ£Όμ°¨μ—μ„ μ΄μ•ΌκΈ°ν–λ“― μ‹±κΈ€ν†¤μ€ κ³µμ  κ°μ²΄λ‹¤. μ‚¬μ©μ Aμ λ°μ΄ν„°λ¥Ό ν•„λ“μ— μ €μ¥ν•λ” μκ°„, λ™μ‹μ— μ ‘μ†ν• μ‚¬μ©μ Bκ°€ κ·Έ κ°’μ„ λ®μ–΄μ“°κ² λλ‹¤. μ΄ μƒνƒμ—μ„ Aκ°€ μ΅°νλ¥Ό μ”μ²­ν•λ©΄ Bμ λ°μ΄ν„°λ¥Ό λ³΄κ² λλ” μΉλ…μ μΈ λ³΄μ• μ‚¬κ³ κ°€ ν„°μ§„λ‹¤. λ°μ΄ν„°λ” ν•­μƒ μ§€μ—­ λ³€μλ‚ νλΌλ―Έν„°λ΅λ§ μ£Όκ³ λ°›μ•„μ•Ό ν•λ‹¤.

Q: @Bean μ§μ ‘ λ“±λ΅κ³Ό μ»΄ν¬λ„νΈ μ¤μΊ” μ¤‘ λ¬΄μ—‡μ„ μ„ νƒν•΄μ•Ό ν•λ‚μ”?
A: μΌλ°μ μΈ λΉ„μ¦λ‹μ¤ λ΅μ§μ€ μƒμ‚°μ„±μ„ μ„ν•΄ μ»΄ν¬λ„νΈ μ¤μΊ”μ„ μ“΄λ‹¤. ν•μ§€λ§ κΈ°μ μ μΈ μ„¤μ •μ΄λ‚ κ³µν†µ κ΄€μ‹¬μ‚¬(AOP, ArgumentResolver λ“±) μ²λΌ ν•λ¶€ κΈ°μ μ„ κ°μ•„ λΌμΈ μΌμ΄ λ§κ³  κµ¬μ΅°λ¥Ό ν•λμ— νμ•…ν•΄μ•Ό ν•λ” ν•µμ‹¬ μ„¤μ • μ •λ³΄λ” @BeanμΌλ΅ μ§μ ‘ λ“±λ΅ν•μ—¬ ν•κ³³μ—μ„ κ΄€λ¦¬ν•λ” κ²ƒμ΄ μ λ¦¬ν•λ‹¤.
